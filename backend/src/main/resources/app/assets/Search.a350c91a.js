import{e,g as a,l as s,i as t,f as l,h as c,j as n,k as r,m as i,n as o,o as d,q as u,a as g}from"./index.a9b7c953.js";import{d as h,z as f,s as p,r as m,g as v,w as y,f as M,t as T,o as L,c as k,b as H,F as S,n as q,u as $,h as _,q as C,p as b,a as j}from"./vendor.03637da4.js";import{_ as x}from"./LoadMore.d34531f5.js";const w=C();b("data-v-5e7f55cc");const E={class:"search-container"},I={class:"search-item"},D={class:"title-content"},P={class:"content"},z={class:"details-area"},F={class:"details-item"},Y={class:"category-tag"},A={class:"category"},B={class:"tag-container"},G={class:"teg"},J={key:0,class:"empty"},K=H("span",null,"TMPTY",-1);j();var N=h({expose:[],setup(C){h({SearchInput:e,LoadMore:x}),f();const b=p();let j=m(!0),N=m(!1);v((()=>{b.query.searchString&&V(b.query.searchString),document.body.onscroll=({srcElement:e})=>{const a=e.scrollingElement;a.scrollTop+a.clientHeight>a.scrollHeight-50&&j.value&&(N.value=!0,R++,U().then((()=>{N.value=!j.value})))}})),y((()=>b.query.searchString),(e=>{V(b.query.searchString)}));let O,Q=M([]),R=1;async function U(){const e=await a(`/search/doSearch?searchString=${O}&page=${R}`);if(200==e.code){const a=e.data;0==a.length&&(j.value=!1),a.forEach(((e,a)=>{Q.push(e)}))}}async function V(e){Q.length=0,R=1,O=e,U()}return(a,h)=>{const f=T("el-tooltip");return L(),k("div",E,[H(e,{class:"search-input",showLogo:!0}),H("div",{class:["search-result",$(g)()]},[(L(!0),k(S,null,q($(Q),(e=>(L(),k("div",I,[H("div",D,[H("h2",{class:"title",innerHTML:e.title,onClick:s=>a.$router.push(`article?id=${e.id}`)},null,8,["innerHTML","onClick"]),H("div",P,[H("img",{src:$(s)(e.articlePoster),class:"img-box",alt:"asd",onClick:s=>a.$router.push(`article?id=${e.id}`)},null,8,["src","onClick"]),H("div",z,[(L(!0),k(S,null,q(e.hitItem,(e=>(L(),k("div",F,[H(f,{placement:"top",content:"articleDesc"==e.field?"文章描述":"文章内容",effect:$(t)()?"dark":"light"},{default:w((()=>[H("img",{src:"articleDesc"==e.field?$(t)()?$(l):$(c):$(t)()?$(n):$(r),alt:""},null,8,["src"])])),_:2},1032,["content","effect"]),H("p",{innerHTML:e.content},null,8,["innerHTML"])])))),256))])])]),H("div",Y,[H("div",A,[H(f,{placement:"top",content:"分类",effect:$(t)()?"dark":"light"},{default:w((()=>[H("img",{src:$(t)()?$(i):$(o),alt:""},null,8,["src"])])),_:1},8,["effect"]),H("span",{innerHTML:e.articleCategory},null,8,["innerHTML"])]),H("div",B,[(L(!0),k(S,null,q(e.articleTags,(e=>(L(),k("div",G,[H(f,{placement:"top",content:"标签",effect:$(t)()?"dark":"light"},{default:w((()=>[H("img",{src:$(t)()?$(d):$(u),alt:""},null,8,["src"])])),_:1},8,["effect"]),H("span",{innerHTML:e},null,8,["innerHTML"])])))),256))])])])))),256))],2),0==$(Q).length?(L(),k("div",J,[H("img",{src:$("/assets/empty.df445c2e.svg"),alt:""},null,8,["src"]),K])):_("",!0),H("div",null,[$(N)?(L(),k(x,{key:0,hasMore:$(j)},null,8,["hasMore"])):_("",!0)])])}}});N.__scopeId="data-v-5e7f55cc";export default N;
