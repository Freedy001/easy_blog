import{f as a,g as e,l as s,i as t,h as l,j as n,k as c,m as r,n as i,o,q as d,r as u,a as g}from"./index.4bbd79ce.js";import{d as h,z as f,s as p,r as m,g as v,w as y,f as M,t as T,o as L,c as k,b as H,F as S,n as q,u as $,h as _,q as b,p as C,a as j}from"./vendor.03637da4.js";import{_ as x}from"./LoadMore.16d19675.js";const w=b();C("data-v-a8978308");const E={class:"search-container"},I={class:"search-item"},D={class:"title-content"},P={class:"content"},z={class:"details-area"},F={class:"details-item"},Y={class:"category-tag"},A={class:"category"},B={class:"tag-container"},G={class:"teg"},J={key:0,class:"empty"},K=H("span",null,"TMPTY",-1);j();var N=h({expose:[],setup(b){h({SearchInput:a,LoadMore:x}),f();const C=p();let j=m(!0),N=m(!1);v((()=>{C.query.searchString&&V(C.query.searchString),document.body.onscroll=({srcElement:a})=>{const e=a.scrollingElement;e.scrollTop+e.clientHeight>e.scrollHeight-50&&j.value&&(N.value=!0,R++,U().then((()=>{N.value=!j.value})))}})),y((()=>C.query.searchString),(a=>{V(C.query.searchString)}));let O,Q=M([]),R=1;async function U(){const a=await e(`/search/doSearch?searchString=${O}&page=${R}`);if(200==a.code){const e=a.data;0==e.length&&(j.value=!1),e.forEach(((a,e)=>{Q.push(a)}))}}async function V(a){Q.length=0,R=1,O=a,U()}return(e,h)=>{const f=T("el-tooltip");return L(),k("div",E,[H(a,{class:"search-input",showLogo:!0}),H("div",{class:["search-result",$(g)()]},[(L(!0),k(S,null,q($(Q),(a=>(L(),k("div",I,[H("div",D,[H("h2",{class:"title",innerHTML:a.title,onClick:s=>e.$router.push(`article?id=${a.id}`)},null,8,["innerHTML","onClick"]),H("div",P,[H("img",{src:$(s)(a.articlePoster),class:"img-box",alt:"asd",onClick:s=>e.$router.push(`article?id=${a.id}`)},null,8,["src","onClick"]),H("div",z,[(L(!0),k(S,null,q(a.hitItem,(a=>(L(),k("div",F,[H(f,{placement:"top",content:"articleDesc"==a.field?"文章描述":"文章内容",effect:$(t)()?"dark":"light"},{default:w((()=>[H("img",{src:"articleDesc"==a.field?$(t)()?$(l):$(n):$(t)()?$(c):$(r),alt:""},null,8,["src"])])),_:2},1032,["content","effect"]),H("p",{innerHTML:a.content},null,8,["innerHTML"])])))),256))])])]),H("div",Y,[H("div",A,[H(f,{placement:"top",content:"分类",effect:$(t)()?"dark":"light"},{default:w((()=>[H("img",{src:$(t)()?$(i):$(o),alt:""},null,8,["src"])])),_:1},8,["effect"]),H("span",{innerHTML:a.articleCategory},null,8,["innerHTML"])]),H("div",B,[(L(!0),k(S,null,q(a.articleTags,(a=>(L(),k("div",G,[H(f,{placement:"top",content:"标签",effect:$(t)()?"dark":"light"},{default:w((()=>[H("img",{src:$(t)()?$(d):$(u),alt:""},null,8,["src"])])),_:1},8,["effect"]),H("span",{innerHTML:a},null,8,["innerHTML"])])))),256))])])])))),256))],2),0==$(Q).length?(L(),k("div",J,[H("img",{src:$("/assets/empty.df445c2e.svg"),alt:""},null,8,["src"]),K])):_("",!0),H("div",null,[$(N)?(L(),k(x,{key:0,hasMore:$(j)},null,8,["hasMore"])):_("",!0)])])}}});N.__scopeId="data-v-a8978308";export default N;
