import{d as e,C as a,r as s,f as l,g as o,t,o as n,c as u,b as i,u as r,M as c,h as d,i as v,v as p,j as f,k as y,x as m,q as g,p as b,y as x,a as h,P as w}from"./vendor.03637da4.js";import{l as k,a as I,g as _}from"./index.c7fc0e38.js";const C=g();b("data-v-aff91462");const $={class:"root"},K={autoplay:"",preload:"auto",id:"video",loop:""},U=x(" Your browser does not support the video tag. "),j={class:"card"},S=i("h1",null,"Hi,感谢你发现了我",-1),T=i("p",null,"心里藏着小星星，生活才能亮晶晶！",-1),z=i("span",{class:"tip"},"如果你喜欢我的博客的话,可以订阅啊😉",-1),E={key:0,style:{color:"red","font-size":"12px",position:"absolute",left:"20px",bottom:"-25px"}},V={class:"email-input"},q=i("span",null,"订阅",-1),D=i("h1",null,"邮箱验证",-1),H=i("p",null,"为了保证邮箱的正确性，请输入我给你发送的验证码",-1),M={key:0,style:{color:"red","font-size":"12px",position:"absolute",left:"20px",bottom:"35px"}},P={class:"email-input"},Y=x("订阅"),A={class:"tip"},B=x("没收到？"),F=x("再发一条 "),G=i("h1",null,"心里藏着小星星，生活才能亮晶晶！",-1),J=i("h2",null,"您已经订阅了",-1);h();var L=e({expose:[],setup(e){var g;const b=null==(g=a())?void 0:g.proxy;let x=s(!0),h=s(60),L=l({});function N(){const e=setInterval((()=>{0==--h.value&&(clearInterval(e),x.value=!1,L.display="none")}),1e3)}N();let O,Q=s(1),R=s(!1),W=s(),X=s(!1);async function Z(){if(null==W.value||!W.value.match("^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$"))return X.value=!0,void setTimeout((()=>{X.value=!1}),3e3);R.value=!0;const e=await _(`/sys/subscribe?email=${W.value}`);200==e.code?(O=e.data,setTimeout((()=>{h.value=60,Q.value=2}),500)):3007==e.code&&(b.$notify({title:"提示",message:e.msg}),Q.value=3,localStorage.setItem("subscribe",O))}let ee=s(!1),ae=s();async function se(){if(!ae.value)return X.value=!0,void setTimeout((()=>{X.value=!1}),3e3);ee.value=!0;const e=await _(`/sys/verify?code=${ae.value}&UUID=${O}`);200==e.code?(ee.value=!1,Q.value=3,localStorage.setItem("subscribe",O)):(ee.value=!1,w({showClose:!0,message:e.msg}))}function le(){L.display="inline",x.value=!0,h.value=60,N(),Z()}return o((()=>{localStorage.getItem("subscribe")&&(Q.value=3)})),(e,a)=>{const s=t("el-button"),l=t("el-card");return n(),u("div",$,[i("video",K,[i("source",{src:r(k)("/resource/ocien.mp4"),type:"video/mp4"},null,8,["src"]),U]),i("div",j,[i(l,{class:["box-card",r(I)()]},{default:C((()=>[i(c,{"enter-active-class":"slide-in-right","leave-active-class":"slide-out-left"},{default:C((()=>[1===r(Q)?(n(),u("div",{key:0,class:["first",r(I)()]},[S,T,z,r(X)?(n(),u("span",E,"你输入的邮箱格式好像不正确😢")):d("",!0),i("div",V,[v(i("input",{type:"text",placeholder:"你的邮箱地址","onUpdate:modelValue":a[1]||(a[1]=e=>f(W)?W.value=e:W=e),onKeypress:y(Z,["enter"])},null,40,["onKeypress"]),[[p,r(W)]]),i(s,{round:"",loading:r(R),class:{onError:r(X)},onClick:Z},{default:C((()=>[q])),_:1},8,["loading","class"])])],2)):d("",!0),2===r(Q)?(n(),u("div",{key:1,class:["second",r(I)()]},[D,H,r(X)?(n(),u("span",M,"你貌似没有输入验证啊！")):d("",!0),i("div",P,[v(i("input",{type:"text",placeholder:"验证码","onUpdate:modelValue":a[2]||(a[2]=e=>f(ae)?ae.value=e:ae=e),onKeypress:y(se,["enter"])},null,40,["onKeypress"]),[[p,r(ae)]]),i(s,{round:"",class:{onError:r(X)},loading:r(ee),onClick:se},{default:C((()=>[Y])),_:1},8,["class","loading"])]),i("span",A,[B,i(s,{onClick:le,loading:r(x),round:""},{default:C((()=>[i("div",{class:"timeout",style:r(L)},m(r(h))+"s后",5),F])),_:1},8,["loading"])])],2)):d("",!0),3===r(Q)?(n(),u("div",{key:2,class:["third",r(I)()]},[G,J],2)):d("",!0)])),_:1})])),_:1},8,["class"])])])}}});L.__scopeId="data-v-aff91462";export default L;
