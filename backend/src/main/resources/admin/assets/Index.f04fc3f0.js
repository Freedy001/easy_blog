import{d as e,r as a,g as l,f as n,v as s,E as t,G as i,h as o,o as d,c as u,b as c,u as r,C as p,e as f,i as m,q as v,p as x,s as h,a as g,j as _}from"./vendor.d4f367cf.js";import{g as y,a as b,b as k}from"./http.379cb87b.js";import"./index.d5e32cea.js";const w=v();x("data-v-8a4bf06a");const I={class:"info"},C={class:"photo",style:{cursor:"pointer"}},N=c("i",{class:"el-icon-user-solid",style:{"margin-right":"10px"}},null,-1),R=h("个人资料 "),j=c("i",{class:"el-icon-more-outline",style:{"margin-right":"10px"}},null,-1),S=h("退出登录 "),U={class:"name"},$=c("i",{class:"el-icon-help"},null,-1),q=c("span",null,"仪表盘",-1),z=c("div",{class:"divide-line"},null,-1),A=c("i",{class:"el-icon-help"},null,-1),E=c("span",null,"发布文章",-1),G=c("i",{class:"el-icon-help"},null,-1),H=c("span",null,"文章列表",-1),L=c("i",{class:"el-icon-help"},null,-1),T=c("span",null,"分类与标签",-1),B=c("i",{class:"el-icon-help"},null,-1),D=c("span",null,"评论",-1),F=c("i",{class:"el-icon-help"},null,-1),J=c("span",null,"附件",-1),K=c("i",{class:"el-icon-help"},null,-1),M=c("span",null,"用户",-1),O=c("div",{class:"divide-line"},null,-1),P=c("i",{class:"el-icon-help"},null,-1),Q=c("span",null,"用户",-1),V=c("i",{class:"el-icon-help"},null,-1),W=c("span",null,"设置",-1);g();var X=e({expose:[],setup(e){const v=a(!1),x=l(),h=n();async function g(){await k(),await x.push("/login")}let _;s((async()=>{le().then((()=>{!function(){let e=h.state.userInfo.permissionStr;X.value=Y.test(e)||Z.test(e)||ee.test(e)||ae.test(e)}()})),te().then(),_=setInterval((()=>{te()}),3e4)}));let X=a(!1),Y=/setting-common/,Z=/setting-smtp/,ee=/setting-comment/,ae=/setting-about/;async function le(){const e=await y("/manager/getUserInfo");200==e.code&&h.commit("setUserInfo",e.data)}t((()=>h.state.notifyReloadNickNameAndHeadImg),(()=>{le()})),t((()=>h.state.notifyReloadReadNum),(()=>{te()}));let ne=a(!1),se=a(0);async function te(){const e=await y("/comment/getNotReadNum");200==e.code&&(se.value=e.data)}return t(se,(e=>ne.value=e>0)),i((()=>{clearTimeout(_)})),(e,a)=>{const l=o("el-dropdown-item"),n=o("el-dropdown-menu"),s=o("el-dropdown"),t=o("el-menu-item"),i=o("el-menu");return d(),u("div",null,[c("div",{class:["sidebar",{hide:v.value}]},[c("div",I,[c(s,null,{dropdown:w((()=>[c(n,null,{default:w((()=>[c(l,{onClick:a[1]||(a[1]=a=>e.$router.push("/index/user"))},{default:w((()=>[N,R])),_:1}),c(l,{onClick:g},{default:w((()=>[j,S])),_:1})])),_:1})])),default:w((()=>[c("div",C,[c("img",{src:r(b)(r(h).state.userInfo.headImg),alt:""},null,8,["src"])])])),_:1}),c("p",U,p(r(h).state.userInfo.nickname),1)]),c(i,{mode:"horizontal","default-active":e.$router.currentRoute.value.path,router:""},{default:w((()=>[c(t,{index:"/index"},{default:w((()=>[$,q])),_:1}),z,c(t,{index:"/index/article"},{default:w((()=>[A,E])),_:1}),c(t,{index:"/index/articleList"},{default:w((()=>[G,H])),_:1}),c(t,{index:"/index/category&tag"},{default:w((()=>[L,T])),_:1}),c(t,{index:"/index/comment"},{default:w((()=>[B,D,c("span",{class:["badge",{twinkle:r(ne)}]},p(r(se)),3)])),_:1}),c(t,{index:"/index/attachments"},{default:w((()=>[F,J])),_:1}),r(X)?(d(),u(t,{key:0,index:"/index/user"},{default:w((()=>[K,M])),_:1})):f("",!0),O,r(X)?f("",!0):(d(),u(t,{key:1,index:"/index/user"},{default:w((()=>[P,Q])),_:1})),r(X)?(d(),u(t,{key:2,index:"/index/setting"},{default:w((()=>[V,W])),_:1})):f("",!0)])),_:1},8,["default-active"]),c(m,{name:"fade",mode:"out-in"},{default:w((()=>[v.value?(d(),u("span",{key:0,onClick:a[2]||(a[2]=e=>v.value=!v.value),class:"el-icon-open"})):(d(),u("span",{key:1,onClick:a[3]||(a[3]=e=>v.value=!v.value),class:"el-icon-turn-off"}))])),_:1})],2)])}}});X.__scopeId="data-v-8a4bf06a";const Y=v();x("data-v-3e6390bc");const Z={class:"main"},ee={class:"container"},ae={class:"content",id:"content"};g();var le=e({expose:[],setup:a=>(e({Sidebar:X}),(e,a)=>{const l=o("router-view");return d(),u("div",Z,[c(X,{class:"side"}),c("div",ee,[c("div",ae,[c(l,null,{default:Y((({Component:e})=>[c(m,{"enter-active-class":"fade-in","leave-active-class":"fade-out",mode:"out-in"},{default:Y((()=>[(d(),u(_(e)))])),_:2},1024)])),_:1})])])])})});le.__scopeId="data-v-3e6390bc";export default le;
