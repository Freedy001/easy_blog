import{d as e,t as l,f as t,v as a,r as o,E as s,H as i,h as n,o as d,c,b as m,u,F as r,K as p,e as f,i as g,I as y,q as h,p as v,s as V,a as b,x as k}from"./vendor.d4f367cf.js";import{g as x,a as w,c as S,p as C}from"./http.f03e9eb8.js";import{_ as U}from"./ImgDrawer.4e974c70.js";import{c as I,n as _}from"./Upload.bb88db0e.js";import"./index.625511e0.js";import"./FullScreen.d7e9a6db.js";const $=h();v("data-v-1dc2b632");const A={class:"indexContainer"},M={class:"common-setting"},N={class:"item"},T=m("h1",null,"博客标题",-1),j={class:"item"},H=m("h1",null,"博客域名",-1),P={class:"item"},D=m("h1",null,"首页文章",-1),L={class:"logo-img item"},E={class:"logo"},F=m("h1",null,"Logo",-1),K={class:"img"},q=m("h1",null,"首页图片",-1),B={class:"item color"},O=m("h1",null,"首页色系",-1),R={class:"show-box"},z={class:"item"},G=m("h1",null,"页脚信息",-1),J=V("保存"),Q={class:"smtp"},W={class:"item"},X=m("h1",null,"SMTP地址",-1),Y={class:"item"},Z=m("h1",null,"SSL端口",-1),ee={class:"item"},le=m("h1",null,"邮箱账号",-1),te={class:"item"},ae=m("h1",null,"邮箱密码或授权码",-1),oe={class:"item"},se=m("h1",null,"发送人",-1),ie=V("保存"),ne={class:"comment"},de={class:"item"},ce=m("h1",null,"评论需要审核",-1),me={class:"item"},ue=m("h1",null,"新评论通知",-1),re={class:"item"},pe=m("h1",null,"评论回复通知对方",-1),fe=V("保存 "),ge={class:"attachment"},ye={class:"item"},he=m("h1",null,"附件存储方式",-1),ve={key:0},Ve={class:"item"},be=m("h1",null,"accessId",-1),ke={class:"item"},xe=m("h1",null,"accessKey",-1),we={class:"item"},Se=m("h1",null,"endpoint",-1),Ce={class:"item"},Ue=m("h1",null,"bucket",-1),Ie=V("保存 "),_e={class:"other"},$e={class:"item"},Ae={class:"about"},Me=m("h1",null,"关于",-1),Ne=V("去编辑"),Te={class:"root"};b();var je=e({expose:[],setup(h){const{proxy:v}=k();e({ImgDrawer:U});const V=l(),b=t();let je=/setting-common/,He=/setting-smtp/,Pe=/setting-comment/,De=/setting-attachment/,Le=/setting-about/;a((()=>{je.test(b.state.userInfo.permissionStr)&&We(),V.query.toForth&&(Fe.value="4")}));let Ee=o(0),Fe=o("1");s(Fe,(e=>{"1"==e?We():"2"==e?async function(){const e=await x("/setting/getSMTPSetting");if(200==e.code){const l=e.data;Object.keys(l).forEach(((e,t)=>{Ye[e]=l[e]}))}else 3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}():"3"==e?async function(){const e=await x("/setting/getCommentSetting");if(200==e.code){const l=e.data;Object.keys(l).forEach(((e,t)=>{el[e]=l[e]}))}else 3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}():"4"==e?async function(){const e=await x("setting/getAttachmentSetting");200==e.code?I(e.data,tl):3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}():"5"==e&&async function(){const e=await S("/frontend/article/get?id=1");200==e.code?I(e.data,ol):3001==e.code&&_()}()}));let Ke=i({indexArticle:{id:"",title:""}}),qe=i({borderBottom:"500vh solid rgba(45, 37, 73, 0.7)"});s((()=>Ke.indexColor),(()=>{qe.borderBottom=`500vh solid ${Ke.indexColor}`}));let Be,Oe=o(!1),Re=i([]);async function ze(e){Oe.value=!0;const l=await S(`/frontend/search/getSuggestions?queryString=${e}`);if(200==l.code){Re.length=1;l.data.forEach(((e,l)=>{Re[0].id!=e.id&&Re.push({id:e.id,label:e.title})})),Oe.value=!1}else 3001===l.code&&_()}function Ge(){Ee.value++,Be="logo"}function Je(){Ee.value++,Be="poster"}function Qe(e){Ke[Be]=e}async function We(){const e=await x("/setting/getCommonSetting");if(200==e.code){const l=e.data;I(l,Ke),Re.push({id:l.indexArticle.id,label:l.indexArticle.title})}else 3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}async function Xe(){const e=await C("/setting/saveCommon",Ke);200==e.code?v.$notify({title:"成功",message:"保存成功!",type:"success"}):3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}s((()=>Ke.indexArticle.id),(e=>{Re.forEach((l=>{l.id==e&&(Ke.indexArticle.title=l.label)}))}));let Ye=i({});async function Ze(){const e=await C("/setting/saveSMTP",Ye);200==e.code?v.$notify({title:"成功",message:"保存成功!",type:"success"}):3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}let el=i({});async function ll(){const e=await C("/setting/saveComment",el);200==e.code?v.$notify({title:"成功",message:"保存成功!",type:"success"}):3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}let tl=i({uploadMode:!1});async function al(){const e=await C("setting/saveAttachment",tl);200==e.code?(v.$notify({title:"成功",message:"保存成功!",type:"success"}),b.commit("notifyReloadNickNameAndHeadImg")):3001==e.code?_():v.$notify({title:"出差啦😢！",message:e.msg,type:"error"})}let ol=i({});return(e,l)=>{const t=n("el-input"),a=n("el-option"),o=n("el-select"),s=n("el-color-picker"),i=n("el-button"),h=n("el-tab-pane"),v=n("el-switch"),V=n("el-tabs");return d(),c("div",A,[m(V,{modelValue:u(Fe),"onUpdate:modelValue":l[20]||(l[20]=e=>y(Fe)?Fe.value=e:Fe=e)},{default:$((()=>[u(je).test(u(b).state.userInfo.permissionStr)?(d(),c(h,{key:0,label:"常规设置",name:"1"},{default:$((()=>[m("div",M,[m("div",N,[T,m(t,{modelValue:u(Ke).blogTitle,"onUpdate:modelValue":l[1]||(l[1]=e=>u(Ke).blogTitle=e),placeholder:"请输入内容"},null,8,["modelValue"])]),m("div",j,[H,m(t,{modelValue:u(Ke).webSiteDomainName,"onUpdate:modelValue":l[2]||(l[2]=e=>u(Ke).webSiteDomainName=e),placeholder:"请输入内容"},null,8,["modelValue"])]),m("div",P,[D,m(o,{modelValue:u(Ke).indexArticle.id,"onUpdate:modelValue":l[3]||(l[3]=e=>u(Ke).indexArticle.id=e),filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":ze,loading:u(Oe)},{default:$((()=>[(d(!0),c(r,null,p(u(Re),(e=>(d(),c(a,{key:e.id,label:e.label,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue","loading"])]),m("div",L,[m("div",E,[F,m("img",{src:u(w)(u(Ke).logo),onClick:Ge,alt:""},null,8,["src"])]),m("div",K,[q,m("img",{src:u(w)(u(Ke).poster),onClick:Je,alt:""},null,8,["src"])])]),m("div",B,[O,m(s,{modelValue:u(Ke).indexColor,"onUpdate:modelValue":l[4]||(l[4]=e=>u(Ke).indexColor=e),"show-alpha":"",class:"color-picker"},null,8,["modelValue"]),m("div",R,[m("div",{class:"triangle",style:u(qe)},null,4),m("img",{src:u(w)(u(Ke).poster),alt:""},null,8,["src"])])]),m("div",z,[G,m(t,{type:"textarea",rows:2,placeholder:"可以填入HTML",modelValue:u(Ke).footInfo,"onUpdate:modelValue":l[5]||(l[5]=e=>u(Ke).footInfo=e)},null,8,["modelValue"])]),m(i,{type:"primary",onClick:Xe},{default:$((()=>[J])),_:1})])])),_:1})):f("",!0),u(He).test(u(b).state.userInfo.permissionStr)?(d(),c(h,{key:1,label:"SMTP设置",name:"2"},{default:$((()=>[m("div",Q,[m("div",W,[X,m(t,{modelValue:u(Ye).emailHostName,"onUpdate:modelValue":l[6]||(l[6]=e=>u(Ye).emailHostName=e),placeholder:"请输入SMTP地址"},null,8,["modelValue"])]),m("div",Y,[Z,m(t,{modelValue:u(Ye).sslPort,"onUpdate:modelValue":l[7]||(l[7]=e=>u(Ye).sslPort=e),placeholder:"请输入SSL端口"},null,8,["modelValue"])]),m("div",ee,[le,m(t,{modelValue:u(Ye).emailFrom,"onUpdate:modelValue":l[8]||(l[8]=e=>u(Ye).emailFrom=e),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),m("div",te,[ae,m(t,{modelValue:u(Ye).emailAuthentication,"onUpdate:modelValue":l[9]||(l[9]=e=>u(Ye).emailAuthentication=e),placeholder:"请输入邮箱密码或授权码"},null,8,["modelValue"])]),m("div",oe,[se,m(t,{modelValue:u(Ye).senderName,"onUpdate:modelValue":l[10]||(l[10]=e=>u(Ye).senderName=e),placeholder:"请输入发送人"},null,8,["modelValue"])]),m(i,{type:"primary",onClick:Ze},{default:$((()=>[ie])),_:1})])])),_:1})):f("",!0),u(Pe).test(u(b).state.userInfo.permissionStr)?(d(),c(h,{key:2,label:"评论设置",name:"3"},{default:$((()=>[m("div",ne,[m("div",de,[ce,m(v,{modelValue:u(el).examination,"onUpdate:modelValue":l[11]||(l[11]=e=>u(el).examination=e)},null,8,["modelValue"])]),m("div",me,[ue,m(v,{modelValue:u(el).newCommentNotification,"onUpdate:modelValue":l[12]||(l[12]=e=>u(el).newCommentNotification=e)},null,8,["modelValue"])]),m("div",re,[pe,m(v,{modelValue:u(el).replayNotification,"onUpdate:modelValue":l[13]||(l[13]=e=>u(el).replayNotification=e)},null,8,["modelValue"])]),m(i,{type:"primary",onClick:ll,style:{"margin-top":"30px"}},{default:$((()=>[fe])),_:1})])])),_:1})):f("",!0),u(De).test(u(b).state.userInfo.permissionStr)?(d(),c(h,{key:3,label:"附件设置",name:"4"},{default:$((()=>[m("div",ge,[m("div",ye,[he,m(v,{"active-color":"rgb(243 119 119)","inactive-color":"rgb(11 191 226)","active-text":"本地存储","inactive-text":"阿里云oss存储",modelValue:u(tl).uploadMode,"onUpdate:modelValue":l[14]||(l[14]=e=>u(tl).uploadMode=e)},null,8,["modelValue"])]),m(g,{name:"el-fade-in-linear"},{default:$((()=>[u(tl).uploadMode?f("",!0):(d(),c("div",ve,[m("div",Ve,[be,m(t,{modelValue:u(tl).accessId,"onUpdate:modelValue":l[15]||(l[15]=e=>u(tl).accessId=e),placeholder:"请输入accessId"},null,8,["modelValue"])]),m("div",ke,[xe,m(t,{modelValue:u(tl).accessKey,"onUpdate:modelValue":l[16]||(l[16]=e=>u(tl).accessKey=e),placeholder:"请输入accessKey"},null,8,["modelValue"])]),m("div",we,[Se,m(t,{modelValue:u(tl).endpoint,"onUpdate:modelValue":l[17]||(l[17]=e=>u(tl).endpoint=e),placeholder:"请输入endpoint"},null,8,["modelValue"])]),m("div",Ce,[Ue,m(t,{modelValue:u(tl).bucket,"onUpdate:modelValue":l[18]||(l[18]=e=>u(tl).bucket=e),placeholder:"请输入bucket"},null,8,["modelValue"])])]))])),_:1}),m(i,{type:"primary",onClick:al,style:{"margin-top":"30px",transition:"all 1s ease"}},{default:$((()=>[Ie])),_:1})])])),_:1})):f("",!0),u(Le).test(u(b).state.userInfo.permissionStr)?(d(),c(h,{key:4,label:"关于页面",name:"5"},{default:$((()=>[m("div",_e,[m("div",$e,[m("div",Ae,[Me,m(i,{type:"primary",onClick:l[19]||(l[19]=l=>e.$router.push("/index/article?id=1")),round:""},{default:$((()=>[Ne])),_:1})]),m("div",Te,[m("article",{class:"markdown-body",id:"markdown",innerHTML:u(ol).content},null,8,["innerHTML"])])])])])),_:1})):f("",!0)])),_:1},8,["modelValue"]),m(U,{isDrawer:u(Ee),onClickCallback:Qe},null,8,["isDrawer"])])}}});je.__scopeId="data-v-1dc2b632";export default je;
