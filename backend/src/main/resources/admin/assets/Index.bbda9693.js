import{d as e,r as a,g as l,f as n,v as t,E as s,G as i,h as o,o as d,c as u,b as c,u as r,C as p,e as f,i as m,q as v,p as x,s as h,a as g,j as _}from"./vendor.d4f367cf.js";import{g as y,a as k,b as w}from"./http.a8f0cc34.js";import"./index.a8427317.js";const I=v();x("data-v-242e1fde");const b={class:"info"},C={class:"photo",style:{cursor:"pointer"}},N=c("i",{class:"el-icon-user-solid",style:{"margin-right":"10px"}},null,-1),R=h("个人资料 "),j=c("i",{class:"el-icon-more-outline",style:{"margin-right":"10px"}},null,-1),S=h("退出登录 "),U={class:"name"},$=c("i",{class:"el-icon-help"},null,-1),q=c("span",null,"仪表盘",-1),z=c("div",{class:"divide-line"},null,-1),A=c("i",{class:"el-icon-help"},null,-1),E=c("span",null,"发布文章",-1),G=c("i",{class:"el-icon-help"},null,-1),H=c("span",null,"文章列表",-1),L=c("i",{class:"el-icon-help"},null,-1),T=c("span",null,"分类与标签",-1),B=c("i",{class:"el-icon-help"},null,-1),D=c("span",null,"评论",-1),F=c("i",{class:"el-icon-help"},null,-1),J=c("span",null,"附件",-1),K=c("i",{class:"el-icon-help"},null,-1),M=c("span",null,"用户",-1),O=c("div",{class:"divide-line"},null,-1),P=c("i",{class:"el-icon-help"},null,-1),Q=c("span",null,"用户",-1),V=c("i",{class:"el-icon-help"},null,-1),W=c("span",null,"设置",-1);g();var X=e({expose:[],setup(e){const v=a(!1),x=l(),h=n();async function g(){await w(),await x.push("/login")}let _;t((async()=>{ne().then((()=>{!function(){let e=h.state.userInfo.permissionStr;X.value=Y.test(e)||Z.test(e)||ee.test(e)||le.test(e)||ae.test(e)}()})),ie().then(),_=setInterval((()=>{ie()}),3e4)}));let X=a(!1),Y=/setting-common/,Z=/setting-smtp/,ee=/setting-comment/,ae=/setting-about/,le=/setting-attachment/;async function ne(){const e=await y("/manager/getUserInfo");200==e.code&&h.commit("setUserInfo",e.data)}s((()=>h.state.notifyReloadNickNameAndHeadImg),(()=>{ne()})),s((()=>h.state.notifyReloadReadNum),(()=>{ie()}));let te=a(!1),se=a(0);async function ie(){const e=await y("/comment/getNotReadNum");200==e.code&&(se.value=e.data)}return s(se,(e=>te.value=e>0)),i((()=>{clearTimeout(_)})),(e,a)=>{const l=o("el-dropdown-item"),n=o("el-dropdown-menu"),t=o("el-dropdown"),s=o("el-menu-item"),i=o("el-menu");return d(),u("div",null,[c("div",{class:["sidebar",{hide:v.value}]},[c("div",b,[c(t,null,{dropdown:I((()=>[c(n,null,{default:I((()=>[c(l,{onClick:a[1]||(a[1]=a=>e.$router.push("/index/user"))},{default:I((()=>[N,R])),_:1}),c(l,{onClick:g},{default:I((()=>[j,S])),_:1})])),_:1})])),default:I((()=>[c("div",C,[c("img",{src:r(k)(r(h).state.userInfo.headImg),alt:""},null,8,["src"])])])),_:1}),c("p",U,p(r(h).state.userInfo.nickname),1)]),c(i,{mode:"horizontal","default-active":e.$router.currentRoute.value.path,router:""},{default:I((()=>[c(s,{index:"/index"},{default:I((()=>[$,q])),_:1}),z,c(s,{index:"/index/article"},{default:I((()=>[A,E])),_:1}),c(s,{index:"/index/articleList"},{default:I((()=>[G,H])),_:1}),c(s,{index:"/index/category&tag"},{default:I((()=>[L,T])),_:1}),c(s,{index:"/index/comment"},{default:I((()=>[B,D,c("span",{class:["badge",{twinkle:r(te)}]},p(r(se)),3)])),_:1}),c(s,{index:"/index/attachments"},{default:I((()=>[F,J])),_:1}),r(X)?(d(),u(s,{key:0,index:"/index/user"},{default:I((()=>[K,M])),_:1})):f("",!0),O,r(X)?f("",!0):(d(),u(s,{key:1,index:"/index/user"},{default:I((()=>[P,Q])),_:1})),r(X)?(d(),u(s,{key:2,index:"/index/setting"},{default:I((()=>[V,W])),_:1})):f("",!0)])),_:1},8,["default-active"]),c(m,{name:"fade",mode:"out-in"},{default:I((()=>[v.value?(d(),u("span",{key:0,onClick:a[2]||(a[2]=e=>v.value=!v.value),class:"el-icon-open"})):(d(),u("span",{key:1,onClick:a[3]||(a[3]=e=>v.value=!v.value),class:"el-icon-turn-off"}))])),_:1})],2)])}}});X.__scopeId="data-v-242e1fde";const Y=v();x("data-v-74d6198a");const Z={class:"main"},ee={class:"container"},ae={class:"content",id:"content"};g();var le=e({expose:[],setup:a=>(e({Sidebar:X}),(e,a)=>{const l=o("router-view");return d(),u("div",Z,[c(X,{class:"side"}),c("div",ee,[c("div",ae,[c(l,null,{default:Y((({Component:e})=>[c(m,{"enter-active-class":"fade-in","leave-active-class":"fade-out",mode:"out-in"},{default:Y((()=>[(d(),u(_(e)))])),_:2},1024)])),_:1})])])])})});le.__scopeId="data-v-74d6198a";export default le;
